package com.edu.nju.asi.utilities.spring;

import com.alibaba.fastjson.JSON;
import com.edu.nju.asi.infoCarrier.traceBack.CumulativeReturn;
import com.edu.nju.asi.infoCarrier.traceBack.StockPoolCriteria;
import com.edu.nju.asi.infoCarrier.traceBack.TraceBackCriteria;
import com.edu.nju.asi.infoCarrier.traceBack.TraceBackInfo;
import com.edu.nju.asi.model.Strategy;
import com.edu.nju.asi.model.User;
import com.fasterxml.jackson.core.JsonProcessingException;
import us.codecraft.webmagic.selector.Json;

import java.nio.charset.Charset;
import java.time.LocalDate;
import java.util.List;

/**
 * Created by cuihua on 2017/5/28.
 */
public class Test {

    public static void main(String[] args) throws JsonProcessingException {
        LocalDate date = null;
        String aa2 = JSON.toJSONString(date);
        LocalDate convertBack = JSON.parseObject(aa2, LocalDate.class);


        /**
         * TraceBackCriteria的date必须是yyyy-MM-dd的格式
         */
        String criteriaString = "{\"startDate\":\"2017-02-06\",\"endDate\":\"2017-04-19\",\"holdingPeriod\":\"10\",\"stockPoolCriteria\":{\"stType\":\"EXCLUDE\",\"blockTypes\":[\"ZXB\"],\"industryTypes\":[\"建筑建材\",\"食品行业\",\"商业百货\",\"农林牧渔\",\"电器行业\",\"电子器件\",\"石油行业\",\"有色金属\"],\"areaTypes\":[\"深圳\",\"北京\",\"吉林\",\"江苏\",\"辽宁\",\"广东\",\"浙江\",\"湖南\",\"河北\",\"新疆\",\"山东\",\"河南\",\"山西\",\"江西\",\"安徽\",\"湖北\",\"内蒙\",\"海南\",\"四川\",\"重庆\",\"陕西\",\"广西\",\"福建\",\"天津\",\"云南\",\"贵州\",\"甘肃\",\"黑龙江\",\"宁夏\",\"青海\",\"上海\",\"西藏\",\"none\"]},\"maxHoldingNum\":\"5\",\"baseStockName\":\"沪深300\",\"isCustomized\":false,\"filterConditions\":[{\"indicatorType\":\"TURNOVER_RATE\",\"comparatorType\":\"RANK_MAX\",\"value\":\"10\",\"formativePeriod\":\"5\"}],\"rankConditions\":[],\"marketSelectingConditions\":[],\"adjustPositionPercent\":\"\",\"bearToBull_num\":\"\",\"bullToBear_num\":\"\"}";
        TraceBackCriteria criteria = JSON.parseObject(criteriaString, TraceBackCriteria.class);


//        String criString = "{\"startDate\":\"2017-06-08\",\"endDate\":\"2017-06-09\",\"holdingPeriod\":\"10\",\"stockPoolCriteria\":{\"stType\":\"EXCLUDE\",\"blockTypes\":[\"ZXB\"]},\"maxHoldingNum\":\"5\",\"baseStockName\":\"沪深300\",\"filterConditions\":[{\"indicatorType\":\"VOLUME\",\"comparatorType\":\"RANK_MAX\",\"value\":\"10\",\"formativePeriod\":\"5\"}],\"rankConditions\":[]}";
//        TraceBackCriteria criteria = JSON.parseObject(criString, TraceBackCriteria.class);


//        String bb = "{\"strategyID\":\"aaghajk\",\"date\":null,\"creater\":\"Charleskkkk\",\"isPrivate\":\"true\",\"content\":null,\"description\":\"fight\",\"traceBackInfo\":null,\"users\":null}";
//        Strategy strategy = JSON.parseObject(bb, Strategy.class);

//        String a = "[{\"cumulativeReturn\":0.0,\"currentDate\":\"2017-04-05\",\"isTraceBack\":true},{\"cumulativeReturn\":0.002897833758175005,\"currentDate\":\"2017-04-06\",\"isTraceBack\":false},{\"cumulativeReturn\":0.003872892016229294,\"currentDate\":\"2017-04-07\",\"isTraceBack\":false},{\"cumulativeReturn\":3.556044459346234E-4,\"currentDate\":\"2017-04-10\",\"isTraceBack\":false},{\"cumulativeReturn\":0.003834249285908599,\"currentDate\":\"2017-04-11\",\"isTraceBack\":false},{\"cumulativeReturn\":0.001582668101870278,\"currentDate\":\"2017-04-12\",\"isTraceBack\":false},{\"cumulativeReturn\":0.0030460403302247424,\"currentDate\":\"2017-04-13\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.004962679798573761,\"currentDate\":\"2017-04-14\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.0068356820921368616,\"currentDate\":\"2017-04-17\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.011744165033340567,\"currentDate\":\"2017-04-18\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.016557896228115637,\"currentDate\":\"2017-04-19\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.012085157161753676,\"currentDate\":\"2017-04-20\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.010590134425330036,\"currentDate\":\"2017-04-21\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.020729655801152876,\"currentDate\":\"2017-04-24\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.017956854392708124,\"currentDate\":\"2017-04-25\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.01675564768926177,\"currentDate\":\"2017-04-26\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.016316992766788604,\"currentDate\":\"2017-04-27\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.018305409537025794,\"currentDate\":\"2017-04-28\",\"isTraceBack\":false}]";
//        List<CumulativeReturn> aa = JSON.parseArray(a, CumulativeReturn.class);

//        String aaa = "{\"absoluteReturnPeriod\":{\"negativeNums\":{23.0:1},\"negativePeriodNum\":1,\"positiveNums\":{7.0:1},\"positivePeriodsNum\":1,\"winRate\":0.5},\"baseCumulativeReturn\":[{\"cumulativeReturn\":0.0,\"currentDate\":\"2017-04-05\",\"isTraceBack\":true},{\"cumulativeReturn\":0.002897833758175005,\"currentDate\":\"2017-04-06\",\"isTraceBack\":false},{\"cumulativeReturn\":0.003872892016229294,\"currentDate\":\"2017-04-07\",\"isTraceBack\":false},{\"cumulativeReturn\":3.556044459346234E-4,\"currentDate\":\"2017-04-10\",\"isTraceBack\":false},{\"cumulativeReturn\":0.003834249285908599,\"currentDate\":\"2017-04-11\",\"isTraceBack\":false},{\"cumulativeReturn\":0.001582668101870278,\"currentDate\":\"2017-04-12\",\"isTraceBack\":false},{\"cumulativeReturn\":0.0030460403302247424,\"currentDate\":\"2017-04-13\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.004962679798573761,\"currentDate\":\"2017-04-14\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.0068356820921368616,\"currentDate\":\"2017-04-17\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.011744165033340567,\"currentDate\":\"2017-04-18\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.016557896228115637,\"currentDate\":\"2017-04-19\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.012085157161753676,\"currentDate\":\"2017-04-20\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.010590134425330036,\"currentDate\":\"2017-04-21\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.020729655801152876,\"currentDate\":\"2017-04-24\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.017956854392708124,\"currentDate\":\"2017-04-25\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.01675564768926177,\"currentDate\":\"2017-04-26\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.016316992766788604,\"currentDate\":\"2017-04-27\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.018305409537025794,\"currentDate\":\"2017-04-28\",\"isTraceBack\":false}],\"holdingDetails\":[{\"baseReturn\":-0.0166,\"buyNum\":0,\"endDate\":\"2017-04-19\",\"excessReturn\":-0.2116,\"holdingNum\":0,\"periodSerial\":1,\"remainInvestment\":771.82,\"sellNum\":0,\"startDate\":\"2017-04-05\",\"strategyReturn\":-0.2282},{\"baseReturn\":-0.0018,\"buyNum\":0,\"endDate\":\"2017-04-28\",\"excessReturn\":0.0649,\"holdingNum\":0,\"periodSerial\":2,\"remainInvestment\":820.53,\"sellNum\":0,\"startDate\":\"2017-04-19\",\"strategyReturn\":0.0631}],\"maxTraceBack\":{\"maxBaseTraceBackRate\":0.02460254781738217,\"maxEndDay\":\"2017-04-24\",\"maxEndIndex\":13,\"maxStartDay\":\"2017-04-06\",\"maxStartIndex\":1,\"maxStrategyTraceBackRate\":0.30026192808076335},\"relativeReturnPeriod\":{\"negativeNums\":{22.0:1},\"negativePeriodNum\":1,\"positiveNums\":{7.0:1},\"positivePeriodsNum\":1,\"winRate\":0.5},\"stageDetails\":{1:[{\"changeRate\":-0.25614754098360654,\"endPrice\":29.04,\"startPrice\":39.04,\"stockCode\":\"002346\",\"stockName\":\"柘中股份\"},{\"changeRate\":-0.23980424143556275,\"endPrice\":46.6,\"startPrice\":61.3,\"stockCode\":\"002851\",\"stockName\":\"麦格米特\"},{\"changeRate\":-0.18273676999486216,\"endPrice\":95.44,\"startPrice\":116.78,\"stockCode\":\"002852\",\"stockName\":\"道道全\"},{\"changeRate\":-0.32513144058885374,\"endPrice\":32.09,\"startPrice\":47.55,\"stockCode\":\"002762\",\"stockName\":\"金发拉比\"},{\"changeRate\":-0.13710450623202308,\"endPrice\":63.0,\"startPrice\":73.01,\"stockCode\":\"002845\",\"stockName\":\"同兴达\"}],2:[{\"changeRate\":0.09786388474913077,\"endPrice\":22.1,\"startPrice\":20.13,\"stockCode\":\"002457\",\"stockName\":\"青龙管业\"},{\"changeRate\":-0.10925644916540209,\"endPrice\":11.74,\"startPrice\":13.18,\"stockCode\":\"002431\",\"stockName\":\"棕榈股份\"},{\"changeRate\":0.05925097820011172,\"endPrice\":18.95,\"startPrice\":17.89,\"stockCode\":\"002839\",\"stockName\":\"张家港行\"},{\"changeRate\":0.23837638376383766,\"endPrice\":33.56,\"startPrice\":27.1,\"stockCode\":\"002836\",\"stockName\":\"新宏泽\"},{\"changeRate\":0.029302325581395304,\"endPrice\":22.13,\"startPrice\":21.5,\"stockCode\":\"002855\",\"stockName\":\"捷荣技术\"}]},\"strategyCumulativeReturn\":[{\"cumulativeReturn\":0.0,\"currentDate\":\"2017-04-05\",\"isTraceBack\":false},{\"cumulativeReturn\":0.009642545861139995,\"currentDate\":\"2017-04-06\",\"isTraceBack\":true},{\"cumulativeReturn\":-0.004920265430114146,\"currentDate\":\"2017-04-07\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.07872101726209701,\"currentDate\":\"2017-04-10\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.056633228693725224,\"currentDate\":\"2017-04-11\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.08547982807840926,\"currentDate\":\"2017-04-12\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.0941250426735879,\"currentDate\":\"2017-04-13\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.11228377564163927,\"currentDate\":\"2017-04-14\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.19819450529763039,\"currentDate\":\"2017-04-17\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.2184820169574977,\"currentDate\":\"2017-04-18\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.22818489984698165,\"currentDate\":\"2017-04-19\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.25873173950831063,\"currentDate\":\"2017-04-20\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.28349554035273816,\"currentDate\":\"2017-04-21\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.29061938221962336,\"currentDate\":\"2017-04-24\",\"isTraceBack\":true},{\"cumulativeReturn\":-0.2699299342015279,\"currentDate\":\"2017-04-25\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.2309284833581915,\"currentDate\":\"2017-04-26\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.21323150333632868,\"currentDate\":\"2017-04-27\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.17946707743215895,\"currentDate\":\"2017-04-28\",\"isTraceBack\":false}],\"traceBackNumVal\":{\"alpha\":-0.3054418470537382,\"annualizedRateOfReturn\":-0.9567678029495679,\"baseAnnualizedRateOfReturn\":-0.2542698371665659,\"baseReturnVolatility\":0.0641072075855754,\"baseSharpeRatio\":-4.590276947779252,\"baseSumRate\":-0.018305409537025794,\"beta\":2.349292617117661,\"informationRatio\":-1.1867176150805685,\"returnVolatility\":0.6056082133085807,\"sharpeRatio\":-1.6458954503010947,\"sumRate\":-0.17946707743215895},\"lastSoldStocks\":[{\"buyDate\":\"2017-04-05\",\"buyPrice\":39.04,\"changeRate\":-0.25614754098360654,\"sellDate\":\"2017-04-19\",\"sellPrice\":29.04,\"stockCode\":\"002346\",\"stockName\":\"柘中股份\"},{\"buyDate\":\"2017-04-05\",\"buyPrice\":61.3,\"changeRate\":-0.23980424143556275,\"sellDate\":\"2017-04-19\",\"sellPrice\":46.6,\"stockCode\":\"002851\",\"stockName\":\"麦格米特\"},{\"buyDate\":\"2017-04-05\",\"buyPrice\":116.78,\"changeRate\":-0.18273676999486216,\"sellDate\":\"2017-04-19\",\"sellPrice\":95.44,\"stockCode\":\"002852\",\"stockName\":\"道道全\"},{\"buyDate\":\"2017-04-05\",\"buyPrice\":47.55,\"changeRate\":-0.32513144058885374,\"sellDate\":\"2017-04-19\",\"sellPrice\":32.09,\"stockCode\":\"002762\",\"stockName\":\"金发拉比\"},{\"buyDate\":\"2017-04-05\",\"buyPrice\":73.01,\"changeRate\":-0.13710450623202308,\"sellDate\":\"2017-04-19\",\"sellPrice\":63.0,\"stockCode\":\"002845\",\"stockName\":\"同兴达\"}]};{\"antiRisk\":0.9997673709209645,\"fluidity\":0.43381616738909634,\"profit\":2.4037672246571995E-7,\"reailty\":0.06999173120884822,\"stability\":0.021278028440686603}";
//        String[] parts  = aaa.split(";");
//        TraceBackInfo info = JSON.parseObject(parts[0], TraceBackInfo.class);

//        String c = "{\"userName\":\"Charleskkkk\",\"password\":\"asdfghjkl123456\",\"email\":\"fdfjj@mm.cc\"}";
//        User me = JSON.parseObject(c, User.class);

//        String ddd = "{\"stType\":\"ONLY\",\"blockTypes\":[\"ZB\",\"ZXB\",\"CYB\"],\"industryTypes\":[\"金融行业\",\"房地产\",\"综合行业\",\"建筑建材\",\"玻璃行业\",\"家电行业\",\"纺织行业\",\"食品行业\",\"电子信息\",\"交通运输\",\"汽车制造\",\"商业百货\",\"电力行业\",\"酒店旅游\",\"机械行业\",\"农林牧渔\",\"电器行业\",\"电子器件\",\"石油行业\",\"有色金属\",\"生物制药\",\"医疗器械\",\"物资外贸\",\"传媒娱乐\",\"发电设备\",\"水泥行业\",\"塑料制品\",\"钢铁行业\",\"化纤行业\",\"农药化肥\",\"公路桥梁\",\"造纸行业\",\"化工行业\",\"环保行业\",\"煤炭行业\",\"酿酒行业\",\"供水供气\",\"开发区\",\"印刷包装\",\"纺织机械\",\"仪器仪表\",\"飞机制造\",\"其它行业\",\"家具行业\",\"摩托车\",\"服装鞋类\",\"陶瓷行业\",\"船舶制造\",\"次新股\",\"none\"],\"areaTypes\":[\"深圳\",\"北京\",\"吉林\",\"江苏\",\"辽宁\",\"广东\",\"浙江\",\"湖南\",\"河北\",\"新疆\",\"山东\",\"河南\",\"山西\",\"江西\",\"安徽\",\"湖北\",\"内蒙\",\"海南\",\"四川\",\"重庆\",\"陕西\",\"广西\",\"福建\",\"天津\",\"云南\",\"贵州\",\"甘肃\",\"黑龙江\",\"宁夏\",\"青海\",\"上海\",\"西藏\",\"none\"]}";
//        StockPoolCriteria poolCriteria = JSON.parseObject(ddd, StockPoolCriteria.class);
    }
}
