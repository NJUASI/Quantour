package com.edu.nju.asi.utilities.spring;

import com.alibaba.fastjson.JSON;
import com.edu.nju.asi.infoCarrier.traceBack.CumulativeReturn;
import com.edu.nju.asi.infoCarrier.traceBack.StockPoolCriteria;
import com.edu.nju.asi.infoCarrier.traceBack.TraceBackCriteria;
import com.edu.nju.asi.infoCarrier.traceBack.TraceBackInfo;
import com.edu.nju.asi.model.Strategy;
import com.edu.nju.asi.model.User;
import com.edu.nju.asi.service.serviceImpl.optimizationService.optimization.OptimizationCriteria;
import com.fasterxml.jackson.core.JsonProcessingException;
import us.codecraft.webmagic.selector.Json;

import java.nio.charset.Charset;
import java.time.LocalDate;
import java.util.List;

/**
 * Created by cuihua on 2017/5/28.
 */
public class Test {

    public static void main(String[] args) throws JsonProcessingException {
        LocalDate date = null;
        String aa2 = JSON.toJSONString(date);
        LocalDate convertBack = JSON.parseObject(aa2, LocalDate.class);


        /**
         * TraceBackCriteria的date必须是yyyy-MM-dd的格式
         */
//        String criteriaString = "{\"startDate\":\"2017-02-06\",\"endDate\":\"2017-04-19\",\"holdingPeriod\":\"10\",\"stockPoolCriteria\":{\"stType\":\"EXCLUDE\",\"blockTypes\":[\"ZXB\"],\"industryTypes\":[\"建筑建材\",\"食品行业\",\"商业百货\",\"农林牧渔\",\"电器行业\",\"电子器件\",\"石油行业\",\"有色金属\"],\"areaTypes\":[\"深圳\",\"北京\",\"吉林\",\"江苏\",\"辽宁\",\"广东\",\"浙江\",\"湖南\",\"河北\",\"新疆\",\"山东\",\"河南\",\"山西\",\"江西\",\"安徽\",\"湖北\",\"内蒙\",\"海南\",\"四川\",\"重庆\",\"陕西\",\"广西\",\"福建\",\"天津\",\"云南\",\"贵州\",\"甘肃\",\"黑龙江\",\"宁夏\",\"青海\",\"上海\",\"西藏\",\"none\"]},\"maxHoldingNum\":\"5\",\"baseStockName\":\"沪深300\",\"isCustomized\":false,\"filterConditions\":[{\"indicatorType\":\"TURNOVER_RATE\",\"comparatorType\":\"RANK_MAX\",\"value\":\"10\",\"formativePeriod\":\"5\"}],\"rankConditions\":[],\"marketSelectingConditions\":[],\"adjustPositionPercent\":\"\",\"bearToBull_num\":\"\",\"bullToBear_num\":\"\"}";
//        TraceBackCriteria criteria = JSON.parseObject(criteriaString, TraceBackCriteria.class);


//        String criString = "{\"startDate\":\"2017-04-21\",\"endDate\":\"2017-06-13\",\"holdingPeriod\":\"5\",\"stockPoolCriteria\":{\"stType\":\"INCLUDE\",\"blockTypes\":[\"CYB\"],\"industryTypes\":[\"房地产\"],\"areaTypes\":[\"深圳\",\"北京\",\"吉林\",\"江苏\",\"辽宁\",\"广东\",\"浙江\",\"湖南\",\"河北\",\"新疆\",\"山东\",\"河南\",\"山西\",\"江西\",\"安徽\",\"湖北\",\"内蒙\",\"海南\",\"四川\",\"重庆\",\"陕西\",\"广西\",\"福建\",\"天津\",\"云南\",\"贵州\",\"甘肃\",\"黑龙江\",\"宁夏\",\"青海\",\"上海\",\"西藏\",\"none\"]},\"maxHoldingNum\":\"5\",\"baseStockName\":\"沪深300\",\"isCustomized\":false,\"filterConditions\":[{\"indicatorType\":\"TRANSACTION_AMOUNT\",\"comparatorType\":\"RANK_MAX\",\"value\":\"10\",\"formativePeriod\":1},{\"indicatorType\":\"VOLUME\",\"comparatorType\":\"RANK_MAX\",\"value\":\"10\",\"formativePeriod\":1}],\"rankConditions\":[],\"marketSelectingConditions\":[],\"adjustPositionPercent\":\"\",\"bearToBull_num\":\"\",\"bullToBear_num\":\"\"}\n";
//        TraceBackCriteria criteria = JSON.parseObject(criString, TraceBackCriteria.class);


//        String bb = "{\"strategyID\":\"测试用\",\"date\":null,\"creator\":\"Charleskkkk\",\"isPrivate\":\"false\",\"content\":\"{\\\"startDate\\\":\\\"2017-02-06\\\",\\\"endDate\\\":\\\"2017-04-27\\\",\\\"holdingPeriod\\\":\\\"20\\\",\\\"stockPoolCriteria\\\":{\\\"stType\\\":\\\"INCLUDE\\\",\\\"blockTypes\\\":[\\\"ZB\\\",\\\"ZXB\\\",\\\"CYB\\\"],\\\"industryTypes\\\":[\\\"纺织行业\\\"],\\\"areaTypes\\\":[\\\"深圳\\\",\\\"北京\\\",\\\"吉林\\\",\\\"江苏\\\",\\\"辽宁\\\",\\\"广东\\\",\\\"浙江\\\",\\\"湖南\\\",\\\"河北\\\",\\\"新疆\\\",\\\"山东\\\",\\\"河南\\\",\\\"山西\\\",\\\"江西\\\",\\\"安徽\\\",\\\"湖北\\\",\\\"内蒙\\\",\\\"海南\\\",\\\"四川\\\",\\\"重庆\\\",\\\"陕西\\\",\\\"广西\\\",\\\"福建\\\",\\\"天津\\\",\\\"云南\\\",\\\"贵州\\\",\\\"甘肃\\\",\\\"黑龙江\\\",\\\"宁夏\\\",\\\"青海\\\",\\\"上海\\\",\\\"西藏\\\",\\\"none\\\"]},\\\"maxHoldingNum\\\":\\\"5\\\",\\\"baseStockName\\\":\\\"沪深300\\\",\\\"isCustomized\\\":false,\\\"filterConditions\\\":[{\\\"indicatorType\\\":\\\"TURNOVER_RATE\\\",\\\"comparatorType\\\":\\\"RANK_MAX\\\",\\\"value\\\":\\\"10\\\",\\\"formativePeriod\\\":\\\"5\\\"}],\\\"rankConditions\\\":[],\\\"marketSelectingConditions\\\":[],\\\"adjustPositionPercent\\\":\\\"\\\",\\\"bearToBull_num\\\":\\\"\\\",\\\"bullToBear_num\\\":\\\"\\\"}\",\"description\":\"666\",\"traceBackInfo\":null,\"users\":null}";
//        Strategy strategy = JSON.parseObject(bb, Strategy.class);

//        String a = "[{\"cumulativeReturn\":0.0,\"currentDate\":\"2017-04-05\",\"isTraceBack\":true},{\"cumulativeReturn\":0.002897833758175005,\"currentDate\":\"2017-04-06\",\"isTraceBack\":false},{\"cumulativeReturn\":0.003872892016229294,\"currentDate\":\"2017-04-07\",\"isTraceBack\":false},{\"cumulativeReturn\":3.556044459346234E-4,\"currentDate\":\"2017-04-10\",\"isTraceBack\":false},{\"cumulativeReturn\":0.003834249285908599,\"currentDate\":\"2017-04-11\",\"isTraceBack\":false},{\"cumulativeReturn\":0.001582668101870278,\"currentDate\":\"2017-04-12\",\"isTraceBack\":false},{\"cumulativeReturn\":0.0030460403302247424,\"currentDate\":\"2017-04-13\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.004962679798573761,\"currentDate\":\"2017-04-14\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.0068356820921368616,\"currentDate\":\"2017-04-17\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.011744165033340567,\"currentDate\":\"2017-04-18\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.016557896228115637,\"currentDate\":\"2017-04-19\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.012085157161753676,\"currentDate\":\"2017-04-20\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.010590134425330036,\"currentDate\":\"2017-04-21\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.020729655801152876,\"currentDate\":\"2017-04-24\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.017956854392708124,\"currentDate\":\"2017-04-25\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.01675564768926177,\"currentDate\":\"2017-04-26\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.016316992766788604,\"currentDate\":\"2017-04-27\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.018305409537025794,\"currentDate\":\"2017-04-28\",\"isTraceBack\":false}]";
//        List<CumulativeReturn> aa = JSON.parseArray(a, CumulativeReturn.class);

//        String aaa = "{\"absoluteReturnPeriod\":{\"negativeNums\":{17.0:1},\"negativePeriodNum\":1,\"positiveNums\":{4.0:1},\"positivePeriodsNum\":1,\"winRate\":0.5},\"baseCumulativeReturn\":[{\"cumulativeReturn\":0.0,\"currentDate\":\"2017-04-05\",\"isTraceBack\":true},{\"cumulativeReturn\":0.002897833758175005,\"currentDate\":\"2017-04-06\",\"isTraceBack\":false},{\"cumulativeReturn\":0.003872892016229294,\"currentDate\":\"2017-04-07\",\"isTraceBack\":false},{\"cumulativeReturn\":3.556044459346234E-4,\"currentDate\":\"2017-04-10\",\"isTraceBack\":false},{\"cumulativeReturn\":0.003834249285908599,\"currentDate\":\"2017-04-11\",\"isTraceBack\":false},{\"cumulativeReturn\":0.001582668101870278,\"currentDate\":\"2017-04-12\",\"isTraceBack\":false},{\"cumulativeReturn\":0.0030460403302247424,\"currentDate\":\"2017-04-13\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.004962679798573761,\"currentDate\":\"2017-04-14\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.0068356820921368616,\"currentDate\":\"2017-04-17\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.011744165033340567,\"currentDate\":\"2017-04-18\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.016557896228115637,\"currentDate\":\"2017-04-19\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.012085157161753676,\"currentDate\":\"2017-04-20\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.010590134425330036,\"currentDate\":\"2017-04-21\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.020729655801152876,\"currentDate\":\"2017-04-24\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.017956854392708124,\"currentDate\":\"2017-04-25\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.01675564768926177,\"currentDate\":\"2017-04-26\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.016316992766788604,\"currentDate\":\"2017-04-27\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.018305409537025794,\"currentDate\":\"2017-04-28\",\"isTraceBack\":false}],\"holdingDetails\":[{\"baseReturn\":-0.0166,\"buyNum\":0,\"endDate\":\"2017-04-19\",\"excessReturn\":-0.153,\"holdingNum\":0,\"periodSerial\":1,\"remainInvestment\":830.46,\"sellNum\":0,\"startDate\":\"2017-04-05\",\"strategyReturn\":-0.1695},{\"baseReturn\":-0.0018,\"buyNum\":0,\"endDate\":\"2017-04-28\",\"excessReturn\":0.0343,\"holdingNum\":0,\"periodSerial\":2,\"remainInvestment\":857.42,\"sellNum\":0,\"startDate\":\"2017-04-19\",\"strategyReturn\":0.0325}],\"maxTraceBack\":{\"maxBaseTraceBackRate\":0.02460254781738217,\"maxEndDay\":\"2017-04-24\",\"maxEndIndex\":13,\"maxStartDay\":\"2017-04-06\",\"maxStartIndex\":1,\"maxStrategyTraceBackRate\":0.2661843897191656},\"relativeReturnPeriod\":{\"negativeNums\":{16.0:1},\"negativePeriodNum\":1,\"positiveNums\":{4.0:1},\"positivePeriodsNum\":1,\"winRate\":0.5},\"stageDetails\":{1:[{\"changeRate\":0.0399274047186934,\"curPosition\":0.2,\"curPositionMoney\":0.2,\"endPrice\":11.46,\"startPrice\":11.02,\"stockCode\":\"601002\",\"stockName\":\"晋亿实业\"},{\"changeRate\":-0.05687606112054329,\"curPosition\":0.2,\"curPositionMoney\":0.2,\"endPrice\":11.11,\"startPrice\":11.78,\"stockCode\":\"600984\",\"stockName\":\"建设机械\"},{\"changeRate\":-0.11066666666666668,\"curPosition\":0.2,\"curPositionMoney\":0.2,\"endPrice\":6.67,\"startPrice\":7.5,\"stockCode\":\"000680\",\"stockName\":\"山推股份\"},{\"changeRate\":-0.6122302158273383,\"curPosition\":0.2,\"curPositionMoney\":0.2,\"endPrice\":10.78,\"startPrice\":27.8,\"stockCode\":\"300420\",\"stockName\":\"五洋科技\"},{\"changeRate\":-0.10787172011661796,\"curPosition\":0.2,\"curPositionMoney\":0.2,\"endPrice\":15.3,\"startPrice\":17.15,\"stockCode\":\"000519\",\"stockName\":\"中兵红箭\"}],2:[{\"changeRate\":0.09997215260373166,\"curPosition\":0.2,\"curPositionMoney\":0.16609130963950108,\"endPrice\":39.5,\"startPrice\":35.91,\"stockCode\":\"000923\",\"stockName\":\"河北宣工\"},{\"changeRate\":0.42024419062623086,\"curPosition\":0.2,\"curPositionMoney\":0.16609130963950108,\"endPrice\":36.06,\"startPrice\":25.39,\"stockCode\":\"000856\",\"stockName\":\"冀东装备\"},{\"changeRate\":-0.15058926233085984,\"curPosition\":0.2,\"curPositionMoney\":0.16609130963950108,\"endPrice\":19.46,\"startPrice\":22.91,\"stockCode\":\"600149\",\"stockName\":\"廊坊发展\"},{\"changeRate\":-0.03801843317972351,\"curPosition\":0.2,\"curPositionMoney\":0.16609130963950108,\"endPrice\":16.7,\"startPrice\":17.36,\"stockCode\":\"600765\",\"stockName\":\"中航重机\"},{\"changeRate\":-0.16924208977189115,\"curPosition\":0.2,\"curPositionMoney\":0.16609130963950108,\"endPrice\":22.58,\"startPrice\":27.18,\"stockCode\":\"300103\",\"stockName\":\"达刚路机\"}]},\"strategyCumulativeReturn\":[{\"cumulativeReturn\":0.0,\"currentDate\":\"2017-04-05\",\"isTraceBack\":false},{\"cumulativeReturn\":0.016160735358945688,\"currentDate\":\"2017-04-06\",\"isTraceBack\":true},{\"cumulativeReturn\":-0.0012784993460335237,\"currentDate\":\"2017-04-07\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.023542020626818316,\"currentDate\":\"2017-04-10\",\"isTraceBack\":false},{\"cumulativeReturn\":0.005919924146137623,\"currentDate\":\"2017-04-11\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.034169092925904976,\"currentDate\":\"2017-04-12\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.03414804104713609,\"currentDate\":\"2017-04-13\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.13947737954668438,\"currentDate\":\"2017-04-14\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.1737823269932901,\"currentDate\":\"2017-04-17\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.17271027966177854,\"currentDate\":\"2017-04-18\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.16954345180249453,\"currentDate\":\"2017-04-19\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.18216004587125534,\"currentDate\":\"2017-04-20\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.23104787942638683,\"currentDate\":\"2017-04-21\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.2500236543602199,\"currentDate\":\"2017-04-24\",\"isTraceBack\":true},{\"cumulativeReturn\":-0.2183690096144868,\"currentDate\":\"2017-04-25\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.19806336572275163,\"currentDate\":\"2017-04-26\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.1778868530298563,\"currentDate\":\"2017-04-27\",\"isTraceBack\":false},{\"cumulativeReturn\":-0.14257577755133832,\"currentDate\":\"2017-04-28\",\"isTraceBack\":false}],\"traceBackNumVal\":{\"alpha\":0.2897328065381046,\"annualizedRateOfReturn\":-0.9130800561111372,\"baseAnnualizedRateOfReturn\":-0.2542698371665659,\"baseReturnVolatility\":0.0641072075855754,\"baseSharpeRatio\":-4.590276947779252,\"baseSumRate\":-0.018305409537025794,\"beta\":4.223378361220797,\"informationRatio\":-1.1306714837451242,\"returnVolatility\":0.6100429795555656,\"sharpeRatio\":-1.5623162433661384,\"sumRate\":-0.14257577755133832},\"transferDayDetails\":[{\"buyDate\":\"2017-04-05\",\"buyPrice\":11.02,\"changeRate\":0.0399274047186934,\"sellDate\":\"2017-04-19\",\"sellPrice\":11.46,\"stockCode\":\"601002\",\"stockName\":\"晋亿实业\"},{\"buyDate\":\"2017-04-05\",\"buyPrice\":11.78,\"changeRate\":-0.05687606112054329,\"sellDate\":\"2017-04-19\",\"sellPrice\":11.11,\"stockCode\":\"600984\",\"stockName\":\"建设机械\"},{\"buyDate\":\"2017-04-05\",\"buyPrice\":7.5,\"changeRate\":-0.11066666666666668,\"sellDate\":\"2017-04-19\",\"sellPrice\":6.67,\"stockCode\":\"000680\",\"stockName\":\"山推股份\"},{\"buyDate\":\"2017-04-05\",\"buyPrice\":27.8,\"changeRate\":-0.6122302158273383,\"sellDate\":\"2017-04-19\",\"sellPrice\":10.78,\"stockCode\":\"300420\",\"stockName\":\"五洋科技\"},{\"buyDate\":\"2017-04-05\",\"buyPrice\":17.15,\"changeRate\":-0.10787172011661796,\"sellDate\":\"2017-04-19\",\"sellPrice\":15.3,\"stockCode\":\"000519\",\"stockName\":\"中兵红箭\"}]};{\"antiRisk\":0.9997673709209645,\"fluidity\":0.43381616738909634,\"profit\":7.34525559053403E-7,\"reality\":0.1345261159908251,\"stability\":0.02017173241867609}";
//        String[] parts  = aaa.split(";");
//        TraceBackInfo info = JSON.parseObject(parts[0], TraceBackInfo.class);

//        String c = "{\"userName\":\"Charleskkkk\",\"password\":\"asdfghjkl123456\",\"email\":\"fdfjj@mm.cc\"}";
//        User me = JSON.parseObject(c, User.class);

//        String ddd = "{\"stType\":\"ONLY\",\"blockTypes\":[\"ZB\",\"ZXB\",\"CYB\"],\"industryTypes\":[\"金融行业\",\"房地产\",\"综合行业\",\"建筑建材\",\"玻璃行业\",\"家电行业\",\"纺织行业\",\"食品行业\",\"电子信息\",\"交通运输\",\"汽车制造\",\"商业百货\",\"电力行业\",\"酒店旅游\",\"机械行业\",\"农林牧渔\",\"电器行业\",\"电子器件\",\"石油行业\",\"有色金属\",\"生物制药\",\"医疗器械\",\"物资外贸\",\"传媒娱乐\",\"发电设备\",\"水泥行业\",\"塑料制品\",\"钢铁行业\",\"化纤行业\",\"农药化肥\",\"公路桥梁\",\"造纸行业\",\"化工行业\",\"环保行业\",\"煤炭行业\",\"酿酒行业\",\"供水供气\",\"开发区\",\"印刷包装\",\"纺织机械\",\"仪器仪表\",\"飞机制造\",\"其它行业\",\"家具行业\",\"摩托车\",\"服装鞋类\",\"陶瓷行业\",\"船舶制造\",\"次新股\",\"none\"],\"areaTypes\":[\"深圳\",\"北京\",\"吉林\",\"江苏\",\"辽宁\",\"广东\",\"浙江\",\"湖南\",\"河北\",\"新疆\",\"山东\",\"河南\",\"山西\",\"江西\",\"安徽\",\"湖北\",\"内蒙\",\"海南\",\"四川\",\"重庆\",\"陕西\",\"广西\",\"福建\",\"天津\",\"云南\",\"贵州\",\"甘肃\",\"黑龙江\",\"宁夏\",\"青海\",\"上海\",\"西藏\",\"none\"]}";
//        StockPoolCriteria poolCriteria = JSON.parseObject(ddd, StockPoolCriteria.class);

        String e = "{\"originTraceBackCriteria\":null,\"filterAdjust\":[{\"minVal\":\"10\",\"maxVal\":\"20\",\"step\":\"2\"}],\"rankAdjust\":[],\"targetFuncType\":\"SHARP\",\"searchNodes\":\"6\"}";
        OptimizationCriteria criteria = JSON.parseObject(e, OptimizationCriteria.class);
    }
}
